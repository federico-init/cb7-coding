"use client";

import { useState, useEffect, createContext } from "react";

// import style
import styles from "@/styles/Index.module.scss";

import Head from "next/head";
import Link from "next/link";
import Script from "next/script";

import { useRouter } from "next/router";

// create context - esercizio 2 17/07/2023
export const GeneralContext = createContext({
  reservation_number: "RES001",
  customer_name: "John Smith",
  reservation_date: "2023-07-17",
  checkin_date: "2023-07-20",
  checkout_date: "2023-07-25",
  room_number: 203,
  room_type: "Deluxe Room",
  number_of_guests: 2,
  extra_services: ["Complimentary Breakfast", "Free Wi-Fi"],
  payment_confirmed: true,
  total_price: 500.0,
  payment_method: "Credit Card",
  notes: "No special requests.",
});

export default function Home() {
  const router = useRouter();
  const [auth, setAuth] = useState({});

  useEffect(() => {
    setAuth(localStorage.getItem("auth"));
  }, []);

  const handleLogout = () => {
    if (confirm("Log out?")) {
      localStorage.clear();
      router.push("/login");
    }
  };

  return (
    <>
      <Script
        src="https://kit.fontawesome.com/509ef7a82b.js"
        crossorigin="anonymous"
      ></Script>
      <Head>
        <title>Next Room Rental</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <nav className={styles.navbar}>
        <h3 className={styles.title} onClick={() => router.push("/")}>
          Next Rental Room
        </h3>
        <ul>
          <li>
            <Link href="/">Home</Link>
          </li>
          <li>
            <Link href="/about">About</Link>
          </li>
          <li>
            <Link href="/contacts">Contact Us</Link>
          </li>
          <li>
            <Link href="/locations">Locations</Link>
          </li>
          {!!auth ? (
            <>
              <li>
                <Link href="/dashboard">
                  <i className="fa-solid fa-user"></i> User
                </Link>
              </li>
              <li>
                <Link href="#" onClick={handleLogout}>
                  <i className="fa-solid fa-arrow-right-from-bracket"></i>{" "}
                  Logout
                </Link>
              </li>
            </>
          ) : (
            <li>
              <Link href="/login">
                <i className="fa-solid fa-arrow-right-to-bracket"></i> Login
              </Link>
            </li>
          )}
        </ul>
      </nav>
    </>
  );
}
